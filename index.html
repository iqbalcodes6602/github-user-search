<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub User Info</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        #result {
            margin-top: 20px;
        }

        #pagination {
            margin-top: 10px;
        }
    </style>
</head>

<body>

    <label for="username">GitHub Username:</label>
    <input type="text" id="username" placeholder="Enter GitHub username">
    <button onclick="getUserInfo()">Get User Info</button>

    <div id="result"></div>
    <div id="pagination"></div>

    <script>
        // Declare variables outside the function
        let reposData, totalRepos, totalPages;

        async function getUserInfo() {
            const username = document.getElementById('username').value;
            const resultDiv = document.getElementById('result');
            const paginationDiv = document.getElementById('pagination');

            resultDiv.innerHTML = ''; // Clear previous results
            paginationDiv.innerHTML = '';

            try {
                // Fetch user details
                const userResponse = await fetch(`https://api.github.com/users/${username}`);
                const userData = await userResponse.json();

                // Fetch user repositories
                const reposResponse = await fetch(`https://api.github.com/users/${username}/repos`);
                reposData = await reposResponse.json();

                // Display user details
                resultDiv.innerHTML = `
          <h2>User Details:</h2>
          <p><strong>Name:</strong> ${userData.name}</p>
          <p><strong>Location:</strong> ${userData.location}</p>
          <h2>Repositories:</h2>
        `;

                // Display repositories with pagination
                const reposPerPage = 10;
                totalRepos = reposData.length;
                totalPages = Math.ceil(totalRepos / reposPerPage);

                let currentPage = 1;
                displayRepos(currentPage);

                // Display pagination options
                paginationDiv.innerHTML = `Page: `;
                for (let i = 1; i <= totalPages; i++) {
                    paginationDiv.innerHTML += `<button onclick="displayRepos(${i})">${i}</button>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<p>No user found with the username "${username}".</p>`;
            }
        }

        function displayRepos(page) {
            const paginationDiv = document.getElementById('pagination');
            const reposDiv = document.getElementById('result');

            paginationDiv.innerHTML = `Page: `;
            for (let i = 1; i <= totalPages; i++) {
                paginationDiv.innerHTML += `<button onclick="displayRepos(${i})">${i}</button>`;
            }

            reposDiv.innerHTML = `<h2>Repositories (Page ${page}):</h2>`;
            const reposPerPage = 10;
            const startIdx = (page - 1) * reposPerPage;
            const endIdx = startIdx + reposPerPage;

            for (let i = startIdx; i < endIdx && i < totalRepos; i++) {
                reposDiv.innerHTML += `<p>${reposData[i].name}</p>`;
            }
        }
    </script>

</body>

</html>